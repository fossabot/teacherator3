language: node_js
node_js:
  - "node"
install:
  # Install meteor
  - curl https://install.meteor.com/ | sh
  # Add meteor to path (instead of asking for sudo in the Travis container)
  # We can then use the faster container infrastructure - http://docs.travis-ci.com/user/workers/container-based-infrastructure/
  - export PATH=$HOME/.meteor:$PATH
  - sudo npm cache clean -f
  - sudo npm install -g n
  - sudo n stable
  - meteor npm install -g n
  - meteor npm install
  - meteor npm install react --save
  - meteor npm install mocha --save
  - meteor npm install enzyme --save
  - meteor npm install enzyme-adapter-react-16 --save
  - meteor npm install babel-core --save
  - meteor npm install babel-preset-env --save
  - meteor npm install babel-preset-react --save
  - meteor npm install babel-polyfill --save
  - meteor npm install chai --save
  - meteor npm install selenium-webdriver chromedriver --save-dev
  - meteor add meteortesting:mocha

script:
- TEST_BROWSER_DRIVER=chrome meteor test --once --driver-package meteortesting:mocha

cache:
  directories:
    - node_modules
